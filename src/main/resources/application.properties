# ===================================================================
# CONFIGURAÇÕES DA APLICAÇÃO SPRING BOOT
# Atlas DataFrame to MongoDB Application
# ===================================================================

# ===================================================================
# CONFIGURAÇÕES DO SERVIDOR
# ===================================================================
server.port=8080
server.servlet.context-path=/api

# ===================================================================
# CONFIGURAÇÕES DO MONGODB
# ===================================================================
# MongoDB Atlas - Conexão Principal - Data Federation
spring.data.mongodb.uri=${MONGODB_MAIN_URI}
spring.data.mongodb.database=${MONGODB_MAIN_DATABASE}

# MongoDB Atlas - Banco Destino (Bradesco Flat Database)
mongodb.flat.uri=${MONGODB_FLAT_URI}
mongodb.flat.database=${MONGODB_FLAT_DATABASE}

# MongoDB Atlas - Controle e Logs
mongodb.control.uri=${MONGODB_CONTROL_URI}
mongodb.control.database=${MONGODB_CONTROL_DATABASE}

# Configurações de Agendamento (10 minutos conforme especificação)
app.scheduler.enabled=true
app.scheduler.cron=0 */1 * * * ?
app.batch.size=1000

# ===================================================================
# CONFIGURAÇÕES DE LOGGING
# ===================================================================
logging.level.com.example.atlasdfmongodb=DEBUG
logging.level.org.springframework.data.mongodb=DEBUG
logging.level.org.springframework.data.mongodb.core.MongoTemplate=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=logs/application.log
logging.file.max-size=10MB
logging.file.max-history=30

# ===================================================================
# CONFIGURAÇÕES DE DESENVOLVIMENTO
# ===================================================================
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# ===================================================================
# CONFIGURAÇÕES DE SERIALIZAÇÃO JSON
# ===================================================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=America/Sao_Paulo

# ===================================================================
# CONFIGURAÇÕES DAS COLLECTIONS MONGODB
# ===================================================================
# Collections de Controle e Log (control_db)
mongodb.control.collection.loadData=${MONGODB_COLLECTION_LOAD_DATA}
mongodb.control.collection.process-control=${MONGODB_COLLECTION_PROCESS_CONTROL}
mongodb.control.collection.process-logs=${MONGODB_COLLECTION_PROCESS_LOGS}

# Collections do Banco Principal (bradesco)
mongodb.principal.collection.flat=flat

# Collections do Banco Flat (bradesco_flat)
mongodb.flat.collection.temp=temp

# Collection para health check do sistema
app.mongodb.collection.health-check=health_check

# Configurações do Atlas para $out
mongodb.atlas.project-id=${MONGODB_ATLAS_PROJECT_ID}
mongodb.atlas.cluster-name=${MONGODB_ATLAS_CLUSTER_NAME}

# Configurações removidas - consolidadas acima

# ===================================================================
# CONFIGURAÇÕES DE VALIDAÇÃO
# ===================================================================
spring.jackson.deserialization.fail-on-unknown-properties=false
spring.jackson.serialization.fail-on-empty-beans=false

# ===================================================================
# CONFIGURAÇÕES DE PERFORMANCE
# ===================================================================
spring.data.mongodb.auto-index-creation=true
spring.data.mongodb.field-naming-strategy=org.springframework.data.mapping.model.SnakeCaseFieldNamingStrategy

# Configuração de Bulk Insert - Tamanho do lote para evitar estouro de memória
app.bulk.insert.size=50000

# ===================================================================
# CONFIGURAÇÕES DE MONITORAMENTO
# ===================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always